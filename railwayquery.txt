CREATE DATABASE RAILWAY_RESERVATION;

USE RAILWAY_RESERVATION;

CREATE TABLE TRAINLIST(
TRAIN_NO VARCHAR(50) PRIMARY KEY,
TRAIN_NAME VARCHAR(50),
SOURCE VARCHAR(50),
DESTINATION VARCHAR(50));


CREATE TABLE TRAIN_STATUS(
TRAIN_NO VARCHAR(45),
TRAIN_DATE datetime,
TOTAL_NO_AC_SEATS INT,
TOTAL_NO_GENRAL_SEATS INT,
NO_OF_AC_SEATS_BOOKED INT,
NO_OF_GENRAL_SEATS_BOOKED INT,
foreign key(TRAIN_NO) references TRAINLIST(TRAIN_NO));


CREATE TABLE PASSANGER(
TICKET_NO VARCHAR(50) ,
TRAIN_NO VARCHAR(45),
DATE_OF_TICKET_BOOKED datetime,
NAME VARCHAR(45),
GENDER VARCHAR(10),
AGE INT,
PASSENGER_ADDRESS VARCHAR(150),
STATUS_OF_RESERVATION VARCHAR(50),
CATEGORY_FOR_TICKET_BOOKED VARCHAR(50),
foreign key(TRAIN_NO) references TRAINLIST(TRAIN_NO),
foreign key(TICKET_NO) references BOOKING(TICKET_NO));


CREATE TABLE BOOKING(
TRAIN_NO VARCHAR(50),
TICKET_NO VARCHAR(50) unique KEY,
TRAIN_DATE datetime,
TICKET_CATEGORY VARCHAR(50),
TOTAL_AC_SEATS INT,
AC_SEATS_BOOKED INT,
TOTAL_GENRAL_SEATS INT,
AC_GENRAL_BOOKED INT,
BOOKING_STATUS VARCHAR(50),
foreign key(TRAIN_NO) references TRAINLIST(TRAIN_NO));


CREATE TABLE CANCEL(
TICKET_NO VARCHAR(50),
TRAIN_NO VARCHAR(45),
TRAIN_NAME VARCHAR(45),
CANCEL_STATUS VARCHAR(50),
foreign key(TRAIN_NO) references TRAINLIST(TRAIN_NO),
foreign key(TICKET_NO) references BOOKING(TICKET_NO));


insert into  TRAINLIST values(1,'trainA','coal','pune');

insert into TRAIN_STATUS values(1,'2022-01-17 8:30:00',30,20,22,15);

insert into PASSANGER values(2,1,'2022-01-17 9:00:00','nikita','female',24,'pune','WAITING','AC');

insert into BOOKING values(1,2,'2022-01-17 9:00:00','A',20,17,20,22,'CONFORMED');

insert into CANCEL values(2,1,'A','yes');






